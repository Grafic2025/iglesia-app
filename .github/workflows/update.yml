name: Actualizar App AutomÃ¡tica
on:
  push:
    branches:
      - main

jobs:
  update:
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ— Checkout repo
        uses: actions/checkout@v3

      - name: âš™ï¸ Configurar Node (v20)
        uses: actions/setup-node@v3
        with:
          node-version: 20 # <--- Cambiamos de 18 a 20 para arreglar el toReversed

      - name: ğŸš€ Instalar EAS y Dependencias
        run: |
          npm install --global eas-cli
          npm install --legacy-peer-deps

      - name: ğŸ“± Publicar EAS Update
        # Usamos CI=1 como sugiriÃ³ el error y forzamos Node 20
        run: CI=1 eas update --auto --branch main --platform android
        env:
          EXPO_TOKEN: ${{ secrets.EXPO_TOKEN }}
